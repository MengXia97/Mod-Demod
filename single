## THIS FILE CREATES A SINGLE EXPERIMENT
## AND ALSO CREATES A JOB FILE WITHIN THAT EXPERIMENT experiment/[protocol]/[experiment] folder

MODEL=poly
EXPNAME=QPSK_poly_hyperparam_search
python experiments/create_experiment_params.py \
    --protocol shared_preamble\
    --mod_order qpsk\
    --mod1 ${MODEL}\
    --demod1 ${MODEL}\
    --mod2 clone\
    --demod2 clone\
    --num_trials 1\
    --train_snr_db mid\
    --experiment_name ${EXPNAME}\
    --mod1_param_json='./work/custom_poly_mod_params.json'\
    --demod1_param_json='./work/custom_poly_demod_params.json'\

#python experiments/make_jobs.py --experiment_folder=./experiments/shared_preamble/QPSK_${MODEL}_vs_clone/
#python run_experiment.py --jobs_file=./experiments/shared_preamble/QPSK_${MODEL}_vs_clone/jobs.json --job_id=0

python experiments/make_jobs.py --experiment_folder=./experiments/shared_preamble/${EXPNAME}/
echo ./experiments/shared_preamble/${EXPNAME}/jobs.json

if [ "$*" == "" ]; then
    #if no arguments given ... just an optional thing so that you can test
    echo "Running...."
    python run_experiment.py --jobs_file=./experiments/shared_preamble/${EXPNAME}/jobs.json --job_id=0
fi

